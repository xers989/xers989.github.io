<!DOCTYPE html><html lang="en-GB"><head> <!-- General meta --><meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --><meta name="generator" content="Jekyll v3.8.5" /><meta property="og:title" content="dns-service2" /><meta name="author" content="Jake Kim" /><meta property="og:locale" content="en_US" /><meta name="description" content="Traffic Management 이전 DNS 관련글에서 DNS zone management 를 이용하는 도메인 관리를 소개하였다. 이를 활용 하여 지역별로 웹서버를 설정 하고 사용자 지역에 따라 가까운 서버에서 응답하도록 구성 하여 보겠다. 하나의 도메인에 여러개의 웹서버를 구성하여 트래픽이 분산 처리 되도록 구성 하여 장애에 대한 대처나 성능을 최대화 하기 위한 방안으로 활용이 가능하며 단지 DNS 을 활용한 것으로 빠르게 적용할 수 있다는 것이 장점이다. 그림을 다시 그려 보면 북미와 유럽, 아시아에 각각 웹서버를 배치하고 Edge DNS가 사용자의 위치에 따라 가까운 웹서버로 전달 되도록 경로를 조정 해 주는 것이다. 즉 사용자가 app.service.com 의 주소를 Edge DNS 에 질의하면 가장 가까운 웹서버의 주소를 반환하여 빠르게 응답을 받을 수 있게 된다. 이를 활용하여 글로벌한 Active-Active 서비스 구성을 할 수 있다. 2개 이상의 데이터 센터를 구성 하고 동일한 서비스를 Active-Active 하게 활용하기 위해 글로벌 로드 밸란서를 활용하여 트래픽을 분산하였는데 Edge DNS 를 활용한 다면 쉽게 대체 할 수 있다. 또한 트래픽이 분산되도록 결정을 담당하는 Traffic Management 가 Edge에서 서비스되어 글로벌하게 배포되어 있어 글로벌한 서비스에 활용한 다면 큰 장점을 얻을 수 있다" /><meta property="og:description" content="Traffic Management 이전 DNS 관련글에서 DNS zone management 를 이용하는 도메인 관리를 소개하였다. 이를 활용 하여 지역별로 웹서버를 설정 하고 사용자 지역에 따라 가까운 서버에서 응답하도록 구성 하여 보겠다. 하나의 도메인에 여러개의 웹서버를 구성하여 트래픽이 분산 처리 되도록 구성 하여 장애에 대한 대처나 성능을 최대화 하기 위한 방안으로 활용이 가능하며 단지 DNS 을 활용한 것으로 빠르게 적용할 수 있다는 것이 장점이다. 그림을 다시 그려 보면 북미와 유럽, 아시아에 각각 웹서버를 배치하고 Edge DNS가 사용자의 위치에 따라 가까운 웹서버로 전달 되도록 경로를 조정 해 주는 것이다. 즉 사용자가 app.service.com 의 주소를 Edge DNS 에 질의하면 가장 가까운 웹서버의 주소를 반환하여 빠르게 응답을 받을 수 있게 된다. 이를 활용하여 글로벌한 Active-Active 서비스 구성을 할 수 있다. 2개 이상의 데이터 센터를 구성 하고 동일한 서비스를 Active-Active 하게 활용하기 위해 글로벌 로드 밸란서를 활용하여 트래픽을 분산하였는데 Edge DNS 를 활용한 다면 쉽게 대체 할 수 있다. 또한 트래픽이 분산되도록 결정을 담당하는 Traffic Management 가 Edge에서 서비스되어 글로벌하게 배포되어 있어 글로벌한 서비스에 활용한 다면 큰 장점을 얻을 수 있다" /><link rel="canonical" href="http://localhost:4000/edge/dns/dns-service2/" /><meta property="og:url" content="http://localhost:4000/edge/dns/dns-service2/" /><meta property="og:site_name" content="Jake Kim" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-01-10T14:42:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="dns-service2" /><meta name="twitter:site" content="@xers9" /><meta name="twitter:creator" content="@Jake Kim" /><meta name="google-site-verification" content="sCRGg28ReGiDdQ4JQ75b6RCTtmBD9J6QQwh1kpIMDAU" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Jake Kim"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/img/kyudong.kim.png"},"name":"Jake Kim"},"url":"http://localhost:4000/edge/dns/dns-service2/","headline":"dns-service2","dateModified":"2020-01-10T14:42:00+09:00","datePublished":"2020-01-10T14:42:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/edge/dns/dns-service2/"},"description":"Traffic Management 이전 DNS 관련글에서 DNS zone management 를 이용하는 도메인 관리를 소개하였다. 이를 활용 하여 지역별로 웹서버를 설정 하고 사용자 지역에 따라 가까운 서버에서 응답하도록 구성 하여 보겠다. 하나의 도메인에 여러개의 웹서버를 구성하여 트래픽이 분산 처리 되도록 구성 하여 장애에 대한 대처나 성능을 최대화 하기 위한 방안으로 활용이 가능하며 단지 DNS 을 활용한 것으로 빠르게 적용할 수 있다는 것이 장점이다. 그림을 다시 그려 보면 북미와 유럽, 아시아에 각각 웹서버를 배치하고 Edge DNS가 사용자의 위치에 따라 가까운 웹서버로 전달 되도록 경로를 조정 해 주는 것이다. 즉 사용자가 app.service.com 의 주소를 Edge DNS 에 질의하면 가장 가까운 웹서버의 주소를 반환하여 빠르게 응답을 받을 수 있게 된다. 이를 활용하여 글로벌한 Active-Active 서비스 구성을 할 수 있다. 2개 이상의 데이터 센터를 구성 하고 동일한 서비스를 Active-Active 하게 활용하기 위해 글로벌 로드 밸란서를 활용하여 트래픽을 분산하였는데 Edge DNS 를 활용한 다면 쉽게 대체 할 수 있다. 또한 트래픽이 분산되도록 결정을 담당하는 Traffic Management 가 Edge에서 서비스되어 글로벌하게 배포되어 있어 글로벌한 서비스에 활용한 다면 큰 장점을 얻을 수 있다","@type":"BlogPosting","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --><title>dns-service2</title><link rel="icon" type="image/png" href="?s=16" sizes="16x16"><link rel="icon" type="image/png" href="?s=32" sizes="32x32"><link rel="icon" type="image/png" href="?s=96" sizes="96x96"><link rel="shortcut icon" href=""><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Jake Kim" /></head><body> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="height: 0; position: absolute"> <symbol id="flickr" viewBox="0 0 16 16"><path d="M0 8c0 2.05 1.662 3.71 3.71 3.71 2.05 0 3.713-1.66 3.713-3.71S5.76 4.29 3.71 4.29C1.663 4.29 0 5.95 0 8zm8.577 0c0 2.05 1.662 3.71 3.712 3.71C14.337 11.71 16 10.05 16 8s-1.662-3.71-3.71-3.71c-2.05 0-3.713 1.66-3.713 3.71z"/></symbol> <symbol id="github" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.582 0 8c0 3.535 2.292 6.533 5.47 7.59.4.075.547-.172.547-.385 0-.19-.007-.693-.01-1.36-2.226.483-2.695-1.073-2.695-1.073-.364-.924-.89-1.17-.89-1.17-.725-.496.056-.486.056-.486.803.056 1.225.824 1.225.824.714 1.223 1.873.87 2.33.665.072-.517.278-.87.507-1.07-1.777-.2-3.644-.888-3.644-3.953 0-.873.31-1.587.823-2.147-.083-.202-.358-1.015.077-2.117 0 0 .672-.215 2.2.82.638-.178 1.323-.266 2.003-.27.68.004 1.364.092 2.003.27 1.527-1.035 2.198-.82 2.198-.82.437 1.102.163 1.915.08 2.117.513.56.823 1.274.823 2.147 0 3.073-1.87 3.75-3.653 3.947.287.246.543.735.543 1.48 0 1.07-.01 1.933-.01 2.195 0 .215.144.463.55.385C13.71 14.53 16 11.534 16 8c0-4.418-3.582-8-8-8"/></symbol> <symbol id="linkedin" viewBox="0 0 16 16"><path d="M13.632 13.635h-2.37V9.922c0-.886-.018-2.025-1.234-2.025-1.235 0-1.424.964-1.424 1.96v3.778h-2.37V6H8.51V7.04h.03c.318-.6 1.092-1.233 2.247-1.233 2.4 0 2.845 1.58 2.845 3.637v4.188zM3.558 4.955c-.762 0-1.376-.617-1.376-1.377 0-.758.614-1.375 1.376-1.375.76 0 1.376.617 1.376 1.375 0 .76-.617 1.377-1.376 1.377zm1.188 8.68H2.37V6h2.376v7.635zM14.816 0H1.18C.528 0 0 .516 0 1.153v13.694C0 15.484.528 16 1.18 16h13.635c.652 0 1.185-.516 1.185-1.153V1.153C16 .516 15.467 0 14.815 0z" fill-rule="nonzero"/></symbol> <symbol id="rss" viewBox="0 0 16 16"><path d="M12.8 16C12.8 8.978 7.022 3.2 0 3.2V0c8.777 0 16 7.223 16 16h-3.2zM2.194 11.61c1.21 0 2.195.985 2.195 2.196 0 1.21-.985 2.194-2.196 2.194C.984 16 0 15.017 0 13.806c0-1.21.983-2.195 2.194-2.195zM10.606 16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818 0 10.606 4.79 10.606 10.607z"/></symbol> <symbol id="twitter" viewBox="0 0 16 16"><path d="M16 3.038c-.59.26-1.22.437-1.885.517.677-.407 1.198-1.05 1.443-1.816-.634.375-1.337.648-2.085.795-.598-.638-1.45-1.036-2.396-1.036-1.812 0-3.282 1.468-3.282 3.28 0 .258.03.51.085.75C5.152 5.39 2.733 4.084 1.114 2.1.83 2.583.67 3.147.67 3.75c0 1.14.58 2.143 1.46 2.732-.538-.017-1.045-.165-1.487-.41v.04c0 1.59 1.13 2.918 2.633 3.22-.276.074-.566.114-.865.114-.21 0-.416-.02-.617-.058.418 1.304 1.63 2.253 3.067 2.28-1.124.88-2.54 1.404-4.077 1.404-.265 0-.526-.015-.783-.045 1.453.93 3.178 1.474 5.032 1.474 6.038 0 9.34-5 9.34-9.338 0-.143-.004-.284-.01-.425.64-.463 1.198-1.04 1.638-1.7z" fill-rule="nonzero"/></symbol> <symbol id="email" viewBox="0 0 16 11"><path fill-rule="evenodd" d="M1.33 0h13.34L8 5 1.33 0zM16 0v11H0V0l8 6 8-6z"/></symbol> </svg><header class="header"><div class="container"> <a class="logo" href="http://localhost:4000" title="Jake Kim"><img src="/assets/img/kyudong.kim.png" alt="Jake Kim logo"/></a><nav class="nav nav--header"><ul class="list list--nav"><li class="item item--nav"><a href="/">Home</a></li><li class="item item--nav"><a href="/blog/">Blog</a></li></ul></nav></div></header><!--collect all blog tags http://longqian.me/2017/02/09/github-jekyll-tag/ --><main class="main container"><article class="content typeset"><h1>dns-service2</h1><small class="small post-meta"> <span class="label label--category"> </span> <time datetime="2020-01-10T14:42:00+09:00" class="time"> 10 Jan 2020 </time> </small><div style="padding-bottom: 3%"><h1 id="traffic-management">Traffic Management</h1><p>이전 DNS 관련글에서 DNS zone management 를 이용하는 도메인 관리를 소개하였다. 이를 활용 하여 지역별로 웹서버를 설정 하고 사용자 지역에 따라 가까운 서버에서 응답하도록 구성 하여 보겠다. 하나의 도메인에 여러개의 웹서버를 구성하여 트래픽이 분산 처리 되도록 구성 하여 장애에 대한 대처나 성능을 최대화 하기 위한 방안으로 활용이 가능하며 단지 DNS 을 활용한 것으로 빠르게 적용할 수 있다는 것이 장점이다. 그림을 다시 그려 보면 북미와 유럽, 아시아에 각각 웹서버를 배치하고 Edge DNS가 사용자의 위치에 따라 가까운 웹서버로 전달 되도록 경로를 조정 해 주는 것이다. 즉 사용자가 app.service.com 의 주소를 Edge DNS 에 질의하면 가장 가까운 웹서버의 주소를 반환하여 빠르게 응답을 받을 수 있게 된다. 이를 활용하여 글로벌한 Active-Active 서비스 구성을 할 수 있다. 2개 이상의 데이터 센터를 구성 하고 동일한 서비스를 Active-Active 하게 활용하기 위해 글로벌 로드 밸란서를 활용하여 트래픽을 분산하였는데 Edge DNS 를 활용한 다면 쉽게 대체 할 수 있다. 또한 트래픽이 분산되도록 결정을 담당하는 Traffic Management 가 Edge에서 서비스되어 글로벌하게 배포되어 있어 글로벌한 서비스에 활용한 다면 큰 장점을 얻을 수 있다 <img src="/image/dns-service2/dns-service-1.png" alt="" /></p><h1 id="web-server">Web Server</h1><p>오라클 클라우드 서비스를 활용하여 서울, 런던, 미국에 웹서버를 구성 하고 사용자별로 어디로 서비스가 전달 되는지 보도록 하겠다. 각 지역별로 웹서버를 구성 하기 위해 오라클 클라우드의 데이터 센터 리전을 확장 하도록 한다. 오라클 클라드에 로그인 하여 상단에 검색 버튼 옆에 데이터 센터를 클릭 하면 리전관리 (Manage Regions) 를 볼 수 있다. 기본 데이터 센터가 Ashburn 으로 하여 London 과 Seoul 을 추가 하도록 한다.<br /> <img src="/image/dns-service2/dns-service-2.png" alt="" /></p><p>우선 미국 지역에 웹서버를 구성 하도록 한다. 지역을 US East (Ashburn) 으로 선택 한다.<br /> <img src="/image/dns-service2/dns-service-3.png" alt="" /> Instance 를 생성 하기 전에 우선 Identity &gt; Compartment 에서 테스트를 위한 Compartment 를 생성 하여 준다. 테스트용 VCN 를 구성해야 한다. 테스트 복적임으로 Quickstart 를 이용하여 바로 생성 하여 준다. Network &gt; Virtual Cloud Networks &gt; Networking Quickstart &gt; VCN with Internet Connectivity 를 선택하여 네트워크를 구성 한다.<br /> VCN 은 테스트를 위한 것임으로 테스트 목적에 맞게 구성하고 Compartment 를 꼭 선택 하여 준다. VCN CIDR Block 은 테스트 용도 임으로 10.0.0.0/16 으로 하고 Public Subnet 의 CIDR 은 10.0.0.0/24 하고 Private Subnet 의 CIDR dms 10.0.1.0/24 로 하여 생성 하여 준다. 생성 되는 네트워크는 기본적인 구성으로 Public subnet 와 Private subnet 으로 구성 되며 Public subnet 에 생성 되는 Instance 는 Public IP 를 가지게 된다.</p><p>Compute &gt; Instances 에서 Create Instance 를 한다. 간단히 Docker 를 활용하여 웹서버를 구성할 것임으로 instance Shape 은 VM.Standard.E2.1 정도로 하면 된다. Show Shape, Network and Storage Options 를 클릭 하여 상세 설정 부분에서 Shape 를 선택 하고 compartment 와 VCN / Subnet 을 선택 한다. Public IP 를 부여 받아야 함으로 Public Subnet 을 선택 한다. 또한 Assign a public IP address 를 선택 하여 준다. SSH 접근을 위해 비대칭키의 Public key 를 등록 하여 준다. <img src="/image/dns-service2/dns-service-4.png" alt="" /></p><p>생성이 완료 되면 부여된 Public IP 를 이용하여 Instance 에 ssh 접근을 한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>yum update
<span class="nv">$ </span><span class="nb">sudo </span>yum <span class="nb">install </span>docker-engine
<span class="nv">$ </span><span class="nb">sudo sudo </span>usermod <span class="nt">-aG</span> docker opc
<span class="nv">$ </span><span class="nb">sudo </span>reboot
<span class="nv">$ </span><span class="nb">sudo </span>systemctl start docker
<span class="nv">$ </span><span class="nb">sudo </span>firewall-cmd <span class="nt">--add-port</span><span class="o">=</span>80/tcp
<span class="nv">$ </span><span class="nb">mkdir </span>html
<span class="nv">$ </span><span class="nb">echo</span> ‘This is my Web-Server running <span class="k">in </span>Ashburn’ <span class="o">&gt;&gt;</span> ./html/index.html
<span class="nv">$ </span>docker run <span class="nt">-it</span> <span class="nt">-d</span> <span class="nt">-p</span> 80:80 <span class="nt">-v</span> /home/opc/html/:/usr/local/apache2/htdocs/ <span class="nt">--name</span> http httpd
<span class="nv">$ </span>docker ps 
CONTAINER ID        IMAGE               COMMAND              CREATED             STATUS              PORTS                NAMES
6beeca27476d        httpd               <span class="s2">"httpd-foreground"</span>   2 minutes ago       Up About a minute   0.0.0.0:80-&gt;80/tcp   http
</code></pre></div></div><p>80 으로 서비스를 허용해 주기 위해 Public subnet 의 security list 에 80 을 추가 하여 준다.<br /> <img src="/image/dns-service2/dns-service-5.png" alt="" /> 브라우저로 접근이 가능한지 테스트 하여 보자<br /> <img src="/image/dns-service2/dns-service-6.png" alt="" /></p><p>동일한 작업을 직역을 변경 하여 진행 하여 준다. 지역 : UK South (London) VCN : EU_VCN Docker image 를 생성할 때 웹서버를 구분 하여 보기 위해 index.html 파일을 생성 할 때 다음과 같이 하여 준다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir </span>html
<span class="nv">$ </span><span class="nb">echo</span> ‘This is my Web-Server running <span class="k">in </span>London’ <span class="o">&gt;&gt;</span> ./html/index.html
<span class="nv">$ </span>docker run <span class="nt">-it</span> <span class="nt">-d</span> <span class="nt">-p</span> 80:80 <span class="nt">-v</span> /home/opc/html/:/usr/local/apache2/htdocs/ <span class="nt">--name</span> http httpd
</code></pre></div></div><p>지역 : South Korea Central (Seoul) VCN : KR_VCN Docker image 를 생성할 때 웹서버를 구분 하여 보기 위해 index.html 파일을 생성 할 때 다음과 같이 하여 준다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir </span>html
<span class="nv">$ </span><span class="nb">echo</span> ‘This is my Web-Server running <span class="k">in </span>Seoul’ <span class="o">&gt;&gt;</span> ./html/index.html
<span class="nv">$ </span>docker run <span class="nt">-it</span> <span class="nt">-d</span> <span class="nt">-p</span> 80:80 <span class="nt">-v</span> /home/opc/html/:/usr/local/apache2/htdocs/ <span class="nt">--name</span> http httpd
</code></pre></div></div><p>웹으로 접근이 가능한 지 확인 하여 보자</p><p>London 에 설치한 웹서버<br /> <img src="/image/dns-service2/dns-service-7.png" alt="" /> Seoul 에 설치한 웹서버<br /> <img src="/image/dns-service2/dns-service-8.png" alt="" /></p><h1 id="traffic-manangement">Traffic Manangement</h1><p>이제 도메인을 DNS 에 등록 하고 설치 한 웹서버의 IP 를 DNS Record 에 등록 하여 주면 도메인 등록이 완료될 것이다. 그러나 3대의 웹서버를 하나의 도메인으로 연결하고 사용자의 위치 정보에 따라 트래픽이 분배 되도록 조정 하겠다. 우선 이전 포스트에서 처럼 DNS Zone management 에 도메인이 등록이 사전에 필요하다. 등록이 완료 되었으면 Cloud 에 로그인 하여 Network &gt; Traffic management 에서 새로운 Traffic Management Steering Policy 를 생성 한다. Traffic Management Steering Policy 은 다음 순서로 등록 한다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. Policy Type : 트래픽을 분배 하기 위한 규칙으로 5 가지의 타입이 있으며 이중 하나를 선택 할 수 있다. 
2. Answer Pool : 트래픽 규칙을 생성 할 때 선택 가능 응답으로 웹트래픽이 전달 될 곳을 의미 한다.
3. Steering Rules : Policy Type 에 따라 구성 되며 Type 에 따른 규칙을 실제로 정의 한다.
4. Attach Health Check : 대상 시스템의 작동 유무를 판단 하기 위한 것으로 기존 등록된 것을 선택하거나 새로생성, 없음을 선택 할 수 있다.
5. Attached Domain : Policy 를 적용할 Domain 을 선택
</code></pre></div></div><h3 id="policy-type">Policy Type</h3><p>Geolocation 을 선택 하고 Policy Name 은 WebServerGeolocationSteering 으로 하고 Policy TTL 은 60 초, Maximum Answer count 는 1 로 등록 하여 준다.<br /> <img src="/image/dns-service2/dns-service-9.png" alt="" /></p><h3 id="answer-pool">Answer Pool</h3><p>Steering Rule 을 등록 할 때 선택 가능한 응답을 등록 하는 곳으로 등록 된 3개 서버 (Ashburn, London, Seoul) 에서 서비스를 할 것임으로 3개를 Answer Pool 로 등록 하여 준다. Pool Name 은 알아보기 쉽게 Ashburn 으로 하고 Answers Name 은 us, type 은 A RDATA 는 Ashburn 웹서버의 IP 를 작성 하여 준다.</p><table><tbody><tr><td>Answer Pool</td><td>Answer Pool Name</td><td>Answers Name</td><td>Type</td><td>RData</td></tr><tr><td>Answer Pool 1</td><td>US</td><td>us</td><td>A</td><td>IP_ADDRESS</td></tr><tr><td>Answer Pool 2</td><td>EU</td><td>eu</td><td>A</td><td>IP_ADDRESS</td></tr><tr><td>Answer Pool 3</td><td>ASIA</td><td>asia</td><td>A</td><td>IP_ADDRESS</td></tr></tbody></table><h3 id="geolocation-steering-rules">Geolocation Steering Rules</h3><p>위치에 따른 응답을 선택 하는 것으로 복수개의 규칙을 등록 할 수 있으며 순서대로 실행 된다. Geolocation 은 대륙 및 나라가 선택 가능 하며 Add Global Catch-All 이 기본으로 선택되게 된다. 시나리오는 유럽과 아프리카는 London 웹서버에서 응답을 주고 백업으로 Ashburn 에서 해주도록 구성 하며 아메리카 대륙은 Ashburn 에서 응답을 주고 London 이 백업 하며 아시아와 호주 지역은 Seoul 에서 응답하고 Ashburn 이 백업 하도록 한다. 그 외에 지역은 Ashburn, Seoul 에서 응답을 주는 것으로 구성 하도록 한다.</p><table><thead><tr><th>Rule</th><th>Geolocation</th><th>Pool Priority 1</th><th>Pool Priority 2</th></tr></thead><tbody><tr><td>Rule1</td><td>North America, South America</td><td>US</td><td>EU</td></tr><tr><td>Rule2</td><td>Asia, Oceania</td><td>ASIA</td><td>US</td></tr><tr><td>Rule3</td><td>Europe, Africa</td><td>EU</td><td>US</td></tr><tr><td>Catchall</td><td> </td><td>US</td><td>ASIA</td></tr></tbody></table><h3 id="attach-health-check--attach-domain">Attach Health Check &amp; Attach domain</h3><p>웹서버를 구성 할 때 헬스체크를 위한 서비스를 등록 하였다면 Health Check 를 등록 하여 응답 불가능 한 상태일 때 다음 서버가 응답을 주도록 구성 할 수 있다. 이번 포스팅에서는 헬스체크를 위한 서비스를 등록 하지 않았음으로 없음을 선택 한다. Attach Domain 은 이전 포스트에서 등록 한 DNS zone 을 선택 하여 Subdomain 에 app 를 입력 해 준다. 등록이 완료 된다면 app.<em>.</em> 으로 서비스 될 것 이다.</p><h1 id="geolocation-test">Geolocation Test</h1><p>준비가 완료 되었음으로 브라우저의 Geolocation 을 변경 하기 위한 Proxy 를 설치 해준다. firefox 에는 Hoxx 라는 무료 plugin 이 있으니 이를 이용하면 된다. 테스트를 할 때 꼭 브라우저 캐시를 지우고 들어가도록 한다. 우선 국내에서 등록한 도메인으로 접근 하는 경우 웹서버는 Seoul 에서 응답해야 할 것이다.<br /> <img src="/image/dns-service2/dns-service-10.png" alt="" /><br /> 이제 위치를 바꾸기 위해 브라우저에 설치된 Hoxx 를 클릭 하고 독일을 선택 한다.<br /> <img src="/image/dns-service2/dns-service-11.png" alt="" /><br /> 브라우저의 캐시를 삭제하고 다시 접근 하면 London 에서 응답을 줄 것 이다.<br /> <img src="/image/dns-service2/dns-service-12.png" alt="" /><br /> 다시 Hoxx 연결을 끊고 미국을 선택 한 후 브라우저 캐시를 삭제하고 접근하면 Ashburn 웹서버에서 응답을 줄 것이다.<br /> <img src="/image/dns-service2/dns-service-13.png" alt="" /></p><p>사용자 브라우저의 위치에 따라 가까운 웹서버에서 응답을 주도록 구성을 하였으며 장애 발생시 응답을 줄 수 있는 곳까지 등록 하였음으로 안정적으로 서비스 가능한 구성이 편리 하게 되었다. 지역별 위치한 웹서버에 대한 동기화는 다루지 않았지만 동기화가 된다면 트래픽을 효과적으로 분산 할 수 있음으로 매우 효율적일 것이며 지역별 서버에 해당 지역 언어로 서비스 하로독 구성하여 보다 편리한 서비스를 구성 할 수 있을 것이다.</p></div></article><aside class="aside typeset"><h4>Related Posts</h4><ul class="list list--posts"><li class="item item--post"><div class="typeset"><h4><a href="/oke/container/respository/OCIR-basic/">Container Repository</a></h4><small class="small post-meta"> <time datetime="2020-03-06T16:57:53+09:00" class="time"> 06 Mar 2020 </time> </small> <span><br/><h1 id="container-repository">Container Repository</h1><p>Oracle Kubernetes Engine 는 Docker 를 기반으로...</span></div></li><li class="item item--post"><div class="typeset"><h4><a href="/oke/kubernetes/OKE-basic/">OKE-Basic</a></h4><small class="small post-meta"> <time datetime="2020-01-10T15:12:00+09:00" class="time"> 10 Jan 2020 </time> </small> <span><br/><h1 id="oracle-kubernetes">Oracle Kubernetes</h1><p>OKE 는 Oracle Kubernetes Engine 으로 Managed...</span></div></li><li class="item item--post"><div class="typeset"><h4><a href="/edge/dns/dns-service/">dns-service</a></h4><small class="small post-meta"> <time datetime="2020-01-02T15:02:00+09:00" class="time"> 02 Jan 2020 </time> </small> <span><br/><h1 id="edge-서비스">Edge 서비스</h1><p>오라클은 2016년 11월 DYN 이란 업체를 인수...</span></div></li></ul><a class="button" href="/feed.xml" title="Subscribe" >Subscribe&nbsp; <svg class="icon" role="img"><use xlink:href="#rss"></use></svg></a><nav class="nav nav--social"><h6>Contact me:</h6><a class="link" target="_blank" href="https://github.com/xers989" title="github"><svg class="icon" role="img"><use xlink:href="#github"></use></svg></a> <a class="link" target="_blank" href="https://www.linkedin.com/in/kyudong-kim-80778033/" title="linkedin"><svg class="icon" role="img"><use xlink:href="#linkedin"></use></svg></a></nav></aside></main><script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-93479534-1', 'auto'); ga('send', 'pageview'); </script><footer class="footer"><div class="container"><nav class="nav nav--footer"><ul class="list list--nav"><li class="item item--nav"> <a href="https://alembic.darn.es/">Adopted Alembic Theme</a></li></ul></nav><div class="copyright typeset"> <small style="color:white;">&copy; Jake Kim 2020</small></div></div></footer></body><link rel="stylesheet" href="/assets/styles.css"><link href="https://fonts.googleapis.com/css?family=Roboto:300" rel="stylesheet"></html>
